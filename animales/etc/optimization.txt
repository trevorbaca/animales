O1:

with [1, -19], 1/16:

    1 measure 4/4 tutti: 99 seconds

    2 measures 4/4 tutti: 225 seconds

    3 measures 4/4 tutti: 320 seconds

    4 measures 4/4 tutti: 423 seconds

    8 measures 4/4 tutti: 790 seconds

with [1, -3], 1/16:

    1 measure 4/4 tutti: 287 seconds

with [1], 1/16:

    1 measure 4/4 tutti: 557 seconds

    2 measures 4/4 tutti: 1095 seconds

optimizing [1, -19], 1/16:

    1 measure 4/4 tutti:

        rhythm: 11 seconds

        commands: 80 seconds (!)

        total: 96 seconds

    2 measures 4/4 tutti:

        rhythm: 22 seconds

        commands: 201 seconds (!)

        total: 229 seconds

    1 measure 4/4 tutti:

        rhythm: 11 seconds

        223 commands: 78 seconds (!)

            STAFF LINE TIME: 77 seconds

        total: 94 seconds

    1 measure 4/4 first violins:

        rhythm: 2 seconds

        55 total commands: 14 seconds

            STAFF LINE TIME: 14 seconds

        segment-maker total: 20 seconds

Block for profiler:

from animales.segments.N.__metadata__ import metadata as previous_metadata
from __metadata__ import metadata as metadata
import ide
import os
segment_directory = ide.Path(os.path.realpath(__file__)).parent
argument = r'''maker.run(
    metadata=metadata,
    previous_metadata=previous_metadata,
    segment_directory=segment_directory,
    )'''
abjad.IOManager.profile(
    argument,
    global_context=globals(),
    line_count=20,
    print_callees=True,
    print_callers=True,)

With (command) forbid update [1, -19], 1/16:

    1 measure 4/4 tutti:

        rhythm: 12 seconds

        commands: 1 second

        segment-make total: 18 seconds

With (command) forbid update [1], 1/16:

    1 measure 4/4 tutti:

        rhythm: 45 seconds

        commands: 3 seconds

        segment-make total: 68 seconds

    2 measures 4/4 tutti:

        rhythm: 85 seconds

        commands: 5 seconds

        segment-make total: 127 seconds

With (rhythm AND command) forbid update [1], 1/16:

    1 measure 4/4 tutti:

        rhythm: 5 seconds

        commands: 3 seconds

        segment-make total: 29 seconds

    2 measures 4/4 tutti:

        rhythm: 11 seconds

        commands: 5 seconds

        segment-make total: 53 seconds

    4 measures 4/4 tutti:

        rhythm: 24 seconds

        commands: 10 seconds

        segment-make total: 104 seconds
